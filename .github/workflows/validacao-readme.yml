name: Validar README

on:
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  validar-readme:
    runs-on: ubuntu-latest
    
    steps:
      - name: üì• Checkout do c√≥digo
        uses: actions/checkout@v3

      - name: üîç Verificar exist√™ncia do README.md
        run: |
          if [ ! -f "README.md" ]; then
            echo "‚ùå O arquivo README.md n√£o foi encontrado."
            exit 1
          fi

      - name: üìë Validando se todas as se√ß√µes obrigat√≥rias existem
        run: |
          REQUIRED_SECTIONS=(
            "# " # t√≠tulo obrigat√≥rio
            "Descri√ß√£o"
            "Tecnologias Utilizadas"
            "Instala√ß√£o"
            "Como Usar"
            "Estrutura de Pastas"
            "Contribui√ß√£o"
            "Licen√ßa"
          )

          MISSING=false

          echo "üîé Verificando se√ß√µes necess√°rias..."

          for section in "${REQUIRED_SECTIONS[@]}"; do
            if ! grep -qi "$section" README.md; then
              echo "‚ùå Se√ß√£o faltando: $section"
              MISSING=true
            else
              echo "‚úî Se√ß√£o encontrada: $section"
            fi
          done

          if [ "$MISSING" = true ]; then
            echo ""
            echo "‚ùå Algumas se√ß√µes obrigat√≥rias est√£o faltando no README."
            echo "Por favor, adicione as se√ß√µes e envie novamente."
            exit 1
          else
            echo ""
            echo "üéâ Todas as se√ß√µes obrigat√≥rias est√£o presentes!"
          fi

      - name: üü¢ A√ß√£o finalizada
        run: |
          echo "Valida√ß√£o conclu√≠da com sucesso."
